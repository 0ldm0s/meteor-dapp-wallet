<template name="elements_executeContract">
    {{#if TemplateVar.get "hasCode"}}

        {{reactiveContext}}

        <div class="dapp-clear-fix"></div>

        <!-- EXECUTE CONTRACT -->
        <div class="execute-contract">
            <!-- <h2> {{i18n "wallet.contracts.contractInformation"}} </h2> -->

            <button class="toggle-visibility dapp-block-button dapp-small">
                {{#if (TemplateVar.get "executionVisible")}}
                    {{i18n "wallet.contracts.buttons.hideContracInfo"}}
                {{else}}
                    {{i18n "wallet.contracts.buttons.showContracInfo"}}
                {{/if}}
            </button>
            
            {{#if TemplateVar.get "executionVisible"}}
            
                <div class="dapp-clear-fix"></div>

                <div class="row clear">
                    <div class="col col-8 mobile-full contract-info">
                        <h2>{{i18n "wallet.contracts.readFromContract"}}</h2>
            
                        <table class="contract-constants dapp-zebra">
                            <tbody>
                            {{#each (TemplateVar.get "contractConstants")}}
                                {{> elements_executeContract_constant}}
                            {{/each}}
                            </tbody>
                        </table>

                    </div>

                    <div class="col col-4 mobile-full contract-functions">
                        {{#with (TemplateVar.get "contractFunctions")}}                    
                            <h2>{{i18n "wallet.contracts.writeToContract"}}</h2>
                            
                            <h4>Select Function</h4>
                            <select class="select-contract-function" name="select-contract-function">
                                <option disabled selected>Pick a contract function</option>

                            {{#each this}}
                                <option value="{{name}}">{{name}}</option>
                            {{/each}}    
                            </select>
                            
                            {{#with selectedFunctionInputs}}
                                {{#if this}}
                                    <div class="dapp-clear"></div>

                                    <h4>From</h4>
                                    {{> dapp_selectAccount accounts=selectAccounts showAccountTypes=true}}

                                    {{#each this}}
                                        {{> Template.dynamic template=template name=name bits=bits parent='selected function' }}
                                    {{/each}}
                                    <div class="dapp-clear"></div>
                                    <button class="dapp-block-button execute">Execute</button>
                                {{/if}}
                            {{/with}}
                            
                        {{/with}}
                    </div>
                </div>

            {{/if}}
        </div>
    {{/if}}
</template>


<template name="elements_executeContract_constant">
    <tr class="constant-input constant-input-{{name}}" data="{{name}}">
        <td>
            <h3>{{name}}</h3>
            {{#each inputs}}
                <!-- name=name bits=bits class="constant-input dapp-small" -->
                {{> Template.dynamic template=template data=this}}
            {{/each}}
        </td>
    </tr>
    <tr>
        <td>
            <dl class="constant-{{name}} dapp-zebra">
            {{#each (TemplateVar.get "outputs")}}
                {{#if name}}
                <dt>{{name}}</dt>
                {{/if}}
                <dd class="output">
                    {{#each value}}
                        {{this}}
                        <br>
                    {{/each}}
                </dd> 
            {{/each}}
            </dl>
        </td>
    </tr>
</template>